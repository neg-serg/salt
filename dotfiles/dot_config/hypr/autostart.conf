# Vars
$terminal = kitty --class term
$wallpaper = swww-daemon
$clipboard_manager = zsh -c 'pkill "wl-paste --watch cliphist store"; wl-paste --watch cliphist store'
$clipboard_persistence = wl-clip-persist --clipboard regular
## hyprpolkitagent is now managed by systemd (graphical-session target)

# Exec
exec = ~/.local/bin/unlock

# Exec once
# Load hy3 plugin, reload, then start pypr via systemd (self-heals on crash)
exec-once = hyprctl plugin load ~/.local/lib/hyprland/libhy3.so && hyprctl reload && sleep 1 && systemctl --user restart --no-block pypr.service

exec-once = $wallpaper
# With prewarm removed, start essential apps on session start
exec-once = $terminal
exec-once = swayosd-server
exec-once = $clipboard_persistence
exec-once = $clipboard_manager
# Quickshell panel via systemd (self-heals on crash)
exec-once = systemctl --user restart --no-block quickshell.service
# Nicotine+ (Soulseek client)
exec-once = nicotine
# Window focus history tracker (enables alt-tab to previous window)
exec-once = ~/.local/bin/hypr-focus-hist
# Vicinae server under systemd user session
exec-once = systemctl --user start --no-block vicinae.service
# Surfingkeys HTTP server (serves config to browser extension)
exec-once = systemctl --user start --no-block surfingkeys-server.service
# Hypridle daemon
# exec-once = hypridle
# Pyprland daemon started after hy3 reload (chained above, managed by systemd)
