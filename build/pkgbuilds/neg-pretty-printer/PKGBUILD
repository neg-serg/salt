# Maintainer: neg-serg <neg-serg@example.com>
pkgname=neg-pretty-printer
pkgver=0.1.0
pkgrel=1
pkgdesc='Custom pretty-printer utilities for scripts (colors, file info)'
arch=('any')
url='https://github.com/neg-serg'
license=('Unlicense')
depends=('python')
makedepends=('python-build' 'python-installer')
source=()
sha256sums=()

_pretty_printer_dir="${startdir}/../../pretty-printer"

build() {
    python -m build --wheel "$_pretty_printer_dir"
}

package() {
    python -m installer --destdir="${pkgdir}" "$_pretty_printer_dir"/dist/*.whl
    # Install runtime dependency not in official repos
    pip install --break-system-packages --target="${pkgdir}/$(python -c 'import site; print(site.getsitepackages()[0])')" colored 2>/dev/null || true
}
