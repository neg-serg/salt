server:
    interface: 127.0.0.1
    port: 5353
    do-tcp: yes
    do-udp: yes
    so-reuseport: yes
    edns-buffer-size: 1232

    # Disable chroot (default chroot=/etc/unbound breaks absolute paths)
    chroot: ""

    # DNSSEC
    auto-trust-anchor-file: /var/lib/unbound/root.key
    val-permissive-mode: no
    harden-dnssec-stripped: yes
    harden-glue: yes
    harden-below-nxdomain: yes

    # Privacy + performance
    qname-minimisation: yes
    minimal-responses: yes
    prefetch: yes
    prefetch-key: yes
    aggressive-nsec: yes

    # Serve stale data while refreshing
    serve-expired: yes
    serve-expired-ttl: 3600
    serve-expired-reply-ttl: 30

    # TLS cert bundle for DoT
    tls-cert-bundle: /etc/pki/tls/certs/ca-bundle.crt

    # Statistics for exporters
    extended-statistics: yes
    statistics-interval: 0
    statistics-cumulative: yes

    # Logging
    verbosity: 1
    log-queries: no
    log-replies: no
    log-local-actions: no
    log-servfail: no

# Allow unbound-control without TLS certs
remote-control:
    control-enable: yes
    control-interface: 127.0.0.1
    control-port: 8953
    control-use-cert: no

# Forward all queries via DNS-over-TLS
forward-zone:
    name: "."
    forward-tls-upstream: yes
    forward-addr: 1.1.1.1@853#cloudflare-dns.com
    forward-addr: 1.0.0.1@853#cloudflare-dns.com
    forward-addr: 9.9.9.9@853#dns.quad9.net
    forward-addr: 149.112.112.112@853#dns.quad9.net
